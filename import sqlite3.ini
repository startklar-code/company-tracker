import sqlite3
import bcrypt

# الاتصال بقاعدة البيانات
conn = sqlite3.connect("users.db")
cursor = conn.cursor()

# بيانات المدير الافتراضية
username = "admin"
password = "admin123"
role = "admin"

# تشفير كلمة المرور باستخدام bcrypt
hashed_pw = bcrypt.hashpw(password.encode('utf-8'), bcrypt.gensalt())

try:
    # إدراج المدير في جدول المستخدمين
    cursor.execute("""
        INSERT INTO users (username, password, role)
        VALUES (?, ?, ?)
    """, (username, hashed_pw, role))

    conn.commit()
    print("✅ تم إنشاء حساب المدير بنجاح.")
except sqlite3.IntegrityError:
    print("⚠️ اسم المستخدم 'admin' موجود بالفعل.")
finally:
    conn.close()
